# Maintainer: Oliver Smith <ollieparaoid@postmarketos.org>
pkgname=tinydm
pkgver=1.0.1
pkgrel=0
pkgdesc="Tiny Display Manager"
url="https://postmarketos.org"
source="https://gitlab.com/postmarketOS/tinydm/-/archive/$pkgver/tinydm-$pkgver.tar.bz2"
arch="noarch"
license="GPL-3.0-or-later"
options="!check" # No tests
depends="autologin $pkgname-openrc"
subpackages="$pkgname-openrc"

prepare() {
	default_prepare

	# default user in pmOS has a UID of 10000
	sed -i "s/# AUTOLOGIN_UID=1000/AUTOLOGIN_UID=10000/" tinydm.confd
}

package() {
	make DESTDIR="$pkgdir" install
}
sha512sums="8a70c0dbff22fa88d26cd4aba0f43b3dd0edc6aa3327548f650d429396e6480d1d5ebfd2864719d12a0fe38fec5078a8dd04750259bce498b070368115bf6c78  tinydm-1.0.1.tar.bz2"
