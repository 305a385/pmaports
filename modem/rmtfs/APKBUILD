# Maintainer: Minecrell <minecrell@minecrell.net>
pkgname=rmtfs
pkgver=0.2_git20200928
_commit="0d00985e5eda7b5fb5c2d49e1c41cdb5118ffe2c"
pkgrel=0
pkgdesc="Qualcomm Remote Filesystem Service Implementation"
url="https://github.com/andersson/rmtfs"
arch="all"
license="BSD-3-Clause"
makedepends="eudev-dev qrtr-dev"
subpackages="$pkgname-doc $pkgname-openrc"
source="
	rmtfs-$_commit.tar.gz::https://github.com/andersson/rmtfs/archive/$_commit.tar.gz
	rmtfs.initd
	udev.rules
"
builddir="$srcdir/rmtfs-$_commit"
options="!check"

build() {
	make rmtfs
}

package() {
	install -Dm755 rmtfs "$pkgdir"/usr/sbin/rmtfs
	install -Dm755 "$srcdir/$pkgname.initd" "$pkgdir/etc/init.d/$pkgname"
	install -Dm644 "$srcdir/udev.rules" "$pkgdir/usr/lib/udev/rules.d/65-$pkgname.rules"
	install -Dm644 LICENSE "$pkgdir"/usr/share/licenses/$pkgname/COPYING
}

sha512sums="23545e5ee6dd77c252eb99230fff532c6f43a7502e5637280e9e6ca77830b37c0198e4ad75cc30e1f1c6358c9387b95d883bced314f0ffd3136f5235b1fa34ab  rmtfs-0d00985e5eda7b5fb5c2d49e1c41cdb5118ffe2c.tar.gz
088b49aa8c251302f01e2233974333d7b66c8f64388e8da1811d0c4a375c1d58722c549ddc03b22d8eb68ea70edcb2cf40f7e50434415eb3e35b9674fed73ab9  rmtfs.initd
cb2435c159d81d3a40d30e1355c82a3d560dc2df7d05fee95085bc80e492ac93a728258f2f1b463c04a964979760990c8c9176b22cb585cbec19ab285cd45440  udev.rules"
